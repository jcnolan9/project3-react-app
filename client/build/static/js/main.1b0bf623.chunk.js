(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n,r,c,s,i,l,o,d=a(3),m=a.n(d),j=a(59),b=a.n(j),u=(a(75),a(23)),h=a(66),O=a(68),p=a(95),x=a(93),g=a(65),f=a(12),N=a(9),v=a(92),y=a(33),w=a(19),k=a(25),S=a.n(k),$=a(90),C=a(26),T=a(94),_=Object(T.a)(n||(n=Object(C.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        userName\n      }\n    }\n  }\n"]))),I=Object(T.a)(r||(r=Object(C.a)(["\nmutation addReminder($contact: ID!, $contactType: String!, $date: String!, $message: String!, $reminderOfUser: String!) {\n    addReminder(contact: $contact, contactType: $contactType, date: $date, message: $message, reminderOfUser: $reminderOfUser) {\n      _id\n      contact {\n          firstName\n          lastName\n      }\n      message\n      reminderOfUser\n    }\n  }\n"]))),U=Object(T.a)(c||(c=Object(C.a)(["\n    mutation addUser($firstName: String!, $lastName: String!,  $userName: String!, $email: String!, $password: String!) {\n        addUser(firstName: $firstName, lastName: $lastName, userName: $userName, email: $email, password: $password) {\n         token\n         user {\n         _id\n         userName\n      }\n    }\n  }\n"]))),D=a(60),L=a(61),R=a(49),P=new(function(){function e(){Object(D.a)(this,e)}return Object(L.a)(e,[{key:"getProfile",value:function(){return Object(R.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(R.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),F=a(2),E=function(e){var t=e.contacts,a=e.user;console.log("MyUser:",a);var n=Object(d.useState)(""),r=Object(w.a)(n,2),c=r[0],s=r[1],i=Object(d.useState)(""),l=Object(w.a)(i,2),o=l[0],m=l[1],j=Object(d.useState)(Date.now()),b=Object(w.a)(j,2),u=b[0],h=b[1],O=Object(d.useState)(""),p=Object(w.a)(O,2),x=p[0],g=p[1],N=Object($.a)(I),v=Object(w.a)(N,2),k=v[0],C=v[1],T=C.error,_=(C.data,function(){var e=Object(y.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k({variables:{contact:c,contactType:o,date:u,message:x,reminderOfUser:a}});case 4:n=e.sent,n.data,s(""),m(""),h(Date.now().toLocaleString("en-US")),g(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()),U=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"contact":s(r);break;case"contactType":m(r);break;case"date":h(r);break;case"message":g(r)}console.log("contact",{contact:c,contactType:o,date:u,message:x,reminderOfUser:a})};return Object(F.jsx)("div",{children:P.loggedIn()?Object(F.jsxs)("div",{className:"card",children:[Object(F.jsx)("h2",{className:"login-header text-light reminder-form-card-header",children:"Create Reminder"}),Object(F.jsxs)("form",{onSubmit:_,children:[Object(F.jsxs)("div",{className:"container ",children:[Object(F.jsx)("label",{for:"contactList",children:"Contact Name:"}),Object(F.jsxs)("select",{className:"reminder-form-input",name:"contact",id:"contactList",value:c,onChange:U,children:[Object(F.jsx)("option",{value:""},"0"),t.map((function(e){return Object(F.jsx)("option",{value:e._id,children:"".concat(e.firstName," ").concat(e.lastName)},e._id)}))]}),Object(F.jsx)("br",{}),Object(F.jsxs)("label",{children:["How to Reach:",Object(F.jsx)("input",{className:"reminder-form-input-radio",type:"radio",id:"text",name:"contactType",value:"text",onChange:U}),Object(F.jsx)("label",{for:"text",children:"Text"}),Object(F.jsx)("input",{className:"reminder-form-input-radio",type:"radio",id:"email",name:"contactType",value:"email",onChange:U}),Object(F.jsx)("label",{for:"email",children:"Email"}),Object(F.jsx)("input",{className:"reminder-form-input-radio",type:"radio",id:"phone",name:"contactType",value:"phone",onChange:U}),Object(F.jsx)("label",{for:"text",children:"Phone Call"})]}),Object(F.jsx)("br",{}),Object(F.jsx)("label",{className:"",for:"reminder-date",children:"Date:"}),Object(F.jsx)("input",{className:"reminder-form-input",type:"text",name:"date",id:"reminder-date",value:u,onChange:U}),Object(F.jsx)("br",{}),Object(F.jsx)("label",{for:"message",children:"Message:"}),Object(F.jsx)("br",{}),Object(F.jsx)("textarea",{className:"reminder-form-message",name:"message",id:"message",placeholder:"What do want to talk about...",value:x,onChange:U}),Object(F.jsx)("br",{})]}),Object(F.jsx)("button",{className:"btn btn-reverse btn-reminder",type:"submit",children:"Create Reminder"}),T&&Object(F.jsx)("div",{className:"col-12 my-3 bg-danger text-white p-3",children:T.message})]})]}):Object(F.jsxs)("p",{children:["Please sign in to create a reminder. Please"," ",Object(F.jsx)(f.b,{to:"/login",children:"login"})," or ",Object(F.jsx)(f.b,{to:"/signup",children:"singup."})]})})},Y=function(e){var t=e.reminders,a=e.title;if(!P.loggedIn()||!t.length)return Object(F.jsx)("h2",{children:"No Reminders Yet. Create some to keep in touch with your contacts!"});return Object(F.jsxs)("div",{children:[Object(F.jsx)("h2",{className:"reminder-list-title",children:a}),t&&t.map((function(e){return Object(F.jsxs)("div",{className:"card card-reminder-list",children:[Object(F.jsxs)("h3",{className:"text-light reminder-header",children:[e.contactType," - ","".concat(e.contact.firstName," ").concat(e.contact.lastName)]}),Object(F.jsx)("img",{src:(t=e.contactType,"phone call"==t?"phone.png":"text"==t?"text.png":"email.png")}),Object(F.jsx)("p",{className:"reminder-list-p",children:e.date}),Object(F.jsx)(f.b,{to:"/reminders/".concat(e._id),children:Object(F.jsx)("p",{className:"reminder-list-p",children:"View and Update this Reminder"})})]},e._id);var t}))]})},q=Object(T.a)(s||(s=Object(C.a)(["\n  query userReminders($userName: String!) {\n    userReminders(userName: $userName) {\n      _id\n      contact {\n        _id\n        firstName\n        lastName\n      }\n      contactType\n      date\n      message\n    }\n  }\n"]))),M=Object(T.a)(i||(i=Object(C.a)(["\n  query userContacts($userName: String!) {\n    userContacts (userName: $userName) {\n        _id\n        firstName\n        lastName\n    }\n  }\n"]))),B=(Object(T.a)(l||(l=Object(C.a)(["\n  query user($_id: ID!) {\n      user (_id: $_id) {\n          userName\n      }\n  }\n"]))),Object(T.a)(o||(o=Object(C.a)(["\n  query reminders($_id: ID!) {\n      reminders(_id: $_id) {\n        contact {\n            _id\n            firstName\n            lastName\n          }\n        contactType\n        date\n        message\n        reminderOfUser\n    }\n  }\n"])))),H=function(){var e;P.loggedIn()&&(e=P.getProfile().data.userName);var t=Object(v.a)(M,{variables:{userName:e}}),a=(t.loading,t.data),n=(null===a||void 0===a?void 0:a.userContacts)||[],r=Object(v.a)(q,{variables:{userName:e}}),c=(r.loading,r.data),s=(null===c||void 0===c?void 0:c.userReminders)||[];return console.log("remindersData",s),Object(F.jsxs)("main",{children:[Object(F.jsx)("div",{children:Object(F.jsx)(E,{contacts:n,user:e})}),Object(F.jsx)("div",{children:Object(F.jsx)(Y,{reminders:s,title:"Upcoming Reminders"})})]})},J=a(32),W=function(){var e=Object(d.useState)({firstName:"",lastName:"",userName:"",email:"",password:""}),t=Object(w.a)(e,2),a=t[0],n=t[1],r=Object($.a)(U),c=Object(w.a)(r,2),s=c[0],i=c[1],l=i.error,o=i.data,m=function(e){var t=e.target,r=t.name,c=t.value;n(Object(u.a)(Object(u.a)({},a),{},Object(J.a)({},r,c)))},j=function(){var e=Object(y.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,s({variables:Object(u.a)({},a)});case 5:n=e.sent,r=n.data,P.login(r.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(F.jsx)("div",{className:"col-12 col-lg-10",children:Object(F.jsxs)("div",{className:"card",children:[Object(F.jsx)("h4",{className:"text-light p-2 login-header",children:"Sign Up"}),Object(F.jsxs)("div",{className:"card-body",children:[o?Object(F.jsxs)("p",{children:["Success! You may now head"," ",Object(F.jsx)(f.b,{to:"/",children:"back to the homepage."})]}):Object(F.jsxs)("form",{onSubmit:j,children:[Object(F.jsx)("label",{for:"firstName",children:"First Name:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"First Name",id:"firstName",name:"firstName",type:"text",value:a.firstName,onChange:m}),Object(F.jsx)("label",{for:"lastName",children:"Last Name:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"Last Name",id:"lastName",name:"lastName",type:"text",value:a.lastName,onChange:m}),Object(F.jsx)("label",{for:"lastName",children:"Username:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"Your username",id:"userName",name:"userName",type:"text",value:a.userName,onChange:m}),Object(F.jsx)("label",{for:"email",children:"Email:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"Your email",id:"email",name:"email",type:"email",value:a.email,onChange:m}),Object(F.jsx)("label",{for:"email",children:"Password:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"******",id:"password",name:"password",type:"password",value:a.password,onChange:m}),Object(F.jsx)("button",{className:"btn btn-block btn-reverse",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(F.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},z=function(e){var t=Object(d.useState)({email:"",password:""}),a=Object(w.a)(t,2),n=a[0],r=a[1],c=Object($.a)(_),s=Object(w.a)(c,2),i=s[0],l=s[1],o=l.error,m=l.data,j=function(e){var t=e.target,a=t.name,c=t.value;r(Object(u.a)(Object(u.a)({},n),{},Object(J.a)({},a,c)))},b=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:{email:n.email,password:n.password}});case 5:a=e.sent,c=a.data,P.login(c.login.token),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Helllooooooo"),console.error(e.t0);case 14:r({email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(F.jsx)("div",{className:"col-12 col-lg-10",children:Object(F.jsxs)("div",{className:"card",children:[Object(F.jsx)("h4",{className:"text-light p-2 login-header",children:"Login"}),Object(F.jsxs)("div",{className:"card-body",children:[m?Object(F.jsxs)("p",{children:["Success! You may now head"," ",Object(F.jsx)(f.b,{to:"/",children:"back to the homepage."})]}):Object(F.jsxs)("form",{onSubmit:b,children:[Object(F.jsx)("label",{for:"email",children:"Email:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"Your email",id:"email",name:"email",type:"email",value:n.email,onChange:j}),Object(F.jsx)("label",{for:"password",children:"Password:"}),Object(F.jsx)("input",{className:"form-input",placeholder:"******",id:"password",name:"password",type:"password",value:n.password,onChange:j}),Object(F.jsx)("button",{className:"btn btn-block btn-reverse",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(F.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},K=function(){var e=Object(N.e)().reminderId;console.log("reminderId",e);var t=Object(v.a)(B,{variables:{_id:e}}),a=t.loading,n=t.data;console.log("data",n);var r,c=(null===n||void 0===n?void 0:n.reminders)||{};return a?Object(F.jsx)("div",{children:"Loading..."}):Object(F.jsxs)("div",{className:"card card-reminder-list",children:[Object(F.jsxs)("h2",{className:"text-light reminder-header",children:[c.contactType," ",c.contact.firstName," ",c.contact.lastName]}),Object(F.jsx)("img",{src:(r=c.contactType,"phone call"==r?"phone.png":"text"==r?"text.png":"email.png")}),Object(F.jsx)("p",{className:"reminder-list-p",children:c.date}),Object(F.jsx)("p",{className:"reminder-list-p message",children:"Message:"}),Object(F.jsx)("p",{className:"reminder-list-p",children:c.message})]})},V=function(){return Object(F.jsx)("header",{className:"bg-header text-light mb-4 py-3 flex-row align-center",children:Object(F.jsxs)("div",{className:"container flex-row justify-space-between align-center",children:[Object(F.jsx)("div",{className:"header-title",children:"Keep In Touch"}),Object(F.jsx)("div",{className:"container flex-row justify-flex-end align-start",children:P.loggedIn()?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("p",{children:["Welcome ",P.getProfile().data.userName]}),Object(F.jsx)("button",{className:"btn",onClick:function(e){e.preventDefault(),P.logout()},children:"Logout"})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.b,{to:"/login",children:Object(F.jsx)("button",{className:"btn",children:"Login"})}),Object(F.jsx)(f.b,{to:"/signup",children:Object(F.jsx)("button",{className:"btn",children:"Signup"})})]})})]})})},A=Object(h.a)({uri:"/graphql"}),G=Object(g.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),Q=new O.a({link:G.concat(A),cache:new p.a});var X=function(){return Object(F.jsx)(x.a,{client:Q,children:Object(F.jsxs)(f.a,{children:[Object(F.jsx)(V,{}),Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)(N.a,{exact:!0,path:"/",children:Object(F.jsx)(H,{})}),Object(F.jsx)(N.a,{exact:!0,path:"/login",children:Object(F.jsx)(z,{})}),Object(F.jsx)(N.a,{exact:!0,path:"/signup",children:Object(F.jsx)(W,{})}),Object(F.jsx)(N.a,{exact:!0,path:"/reminders/:reminderId",children:Object(F.jsx)(K,{})})]})]})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};b.a.render(Object(F.jsx)(m.a.StrictMode,{children:Object(F.jsx)(X,{})}),document.getElementById("root")),Z()}},[[83,1,2]]]);
//# sourceMappingURL=main.1b0bf623.chunk.js.map